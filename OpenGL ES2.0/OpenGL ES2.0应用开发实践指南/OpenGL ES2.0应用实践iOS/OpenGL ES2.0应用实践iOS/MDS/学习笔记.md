### 编程实践

#### 名词解析：
GPU ：图像处理单元
RAM ：随机存取存储器

#### 1  3D渲染
1、屏幕只有2维，用3D数据生成一个2D图像的过程就叫渲染。在计算机上显示的图片是由矩形的颜色点组成的，这些矩形的颜色点叫做像素。

每个像素点由红、绿、蓝三个颜色元素组成。而这3个颜色正好对应3个数值。所以一个像素可以用一个包含三个元素的数组表示。

2、渲染3D主要分为以下几个步骤：
* **为GPU提供要处理的数据**

    OpenGL ES部分运行在CPU上，部分运行在GPU上。OpenGL ES横跨在两个处理器之间，协调两个内存区域（CPU的RAM和GPU的RAM）之间数据的交换。但是数据的交换和内存的访问速度都是巨大的瓶颈。
    因此，OpenGL ES为两个内存区域间的数据交换 定义了一个**缓存**概念。缓存是指图像处理器能够控制和管理的连续RAM。程序从CPU内存中复制数据到OpenGL ES 的缓存中。这样GPU就可以独占缓存单独享用这些资源，以最有效方式读写数据。而CPU因为无需再等待资源，所以可以继续执行其他的程序。
    为缓存提供数据的步骤及对应C语言函数：
    1、生成  glGenBuffers( ) ——请求OpenGL ES为图形处理器控制的缓存生成一个标识符
    2、绑定 glBindBuffer（）——告诉OpenGL ES为接下来的运算使用一个缓存
    3、缓存数据 glBufferData（）或 glBufferSubData（）——为缓存分配并初始化足够连续内存
    4、启用or禁止 glEnableVertexAttribArray（）或 glDisableVertexAttribArray（）告诉OpenGL ES接下来的渲染是否使用缓存中的数据
    5、设置指针 glVertexAttribPointer（）——告诉OpenGL ES在缓存中的数据的类型和访问数据的内存偏移值
    6、绘图 glDrawArrays（）或 glDrawElement（）—— 启用渲染
    7、删除 glDeleteBuffer（）—— 释放缓存资源
    
     在渲染完成后，GPU得需要一个存储渲染结果的2D图像像素数据的地方。这个接收渲染结果的地方就是**帧缓存**区。 
     
     
3、 **OpenGL ES上下文** 
    应该是指整个OpenGL ES的运行程序
    
4、 需要的数据
    1、坐标系：以手机屏幕为例，左下角是圆点，x轴正方向向右，y轴正方向向上，z轴正方向是屏幕正方向。
        2、矢量；
        3、点、线、三角形：OpenGL ES只渲染顶点、线段、三角形。
        

**总结**：
渲染是指把程序提供的几何数据转换成屏幕上图像的过程。渲染主要作用于顶点、线段、三角形。OpenGL ES的坐标系、矢量是几何数据的基础。GPU控制OpenGL ES提供的缓存是高效渲染的关键。渲染的结果通常保存在帧缓存中，有两个特殊的帧缓存:前帧缓存和后帧缓存，它们控制着屏幕像素的最终颜色。OpenGL ES的上下文保存了OpenGL ES的状态信息，包括用于提供渲染数据的缓存地址和用于接收渲染结果的缓存地址。

        
        
        
        
        

#### 2、iOS 中的OpenGL ES基础
1、


